
  <div class="content">
    <div class="container">
      <button class="my-5  btn btn-light "(click)="getCampagnes()">All request</button>
      <div class="d-flex justify-content-between">
        <div class="d-flex justify-content-start ">
          <div class="col-auto px-4 ">
            <label for="staticEmail2" class="form-control-plaintext">Filtre</label>
          </div>
          <div class="col-auto mx-4">
            <input [(ngModel)]="searchText" class="form-control"  >
          </div>
          <div class="col-md-6">
              <select class="form-select" [(ngModel)]="searchBybrand" aria-label="Default select example">
                <option *ngFor="let brand of listBrands " [value]="brand.brandId">  {{ brand?.name }} </option>
              </select>
          </div>
        </div>
        <div class=" float-end bg-primary mx-2">
          <button  class="btn btn-primary float-end px-4" (click)="fitreCompaign(searchBybrand)">Filtre</button>

        </div>
      </div>

      <div class="table-responsive custom-table-responsive">
        <table class="table custom-table">
          <thead>
            <tr>  
              <th scope="col">Status</th>
              <th scope="col">Name</th>
              <th scope="col">Type</th>
              <th scope="col">Brand</th>
              <th scope="col">Submission</th>
              <th scope="col"></th>

            </tr>
          </thead>
          <tbody>
            <tr class="separator" scope="row" *ngFor="let compagne of listOfCampagnes | filter:searchText"  data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@fat"  (click)="showDetailCompagne(compagne)">
              <td class="border-primary" scope="row">

                <div style="display: flex; justify-content: space-around">
                  <div class="col-5">
                    <label class="control" *ngIf="compagne?.requestStatus.value =='Validated'">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle text-success" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                      </svg>
                      <div class="text-success">{{compagne?.requestStatus.value}}</div>
                    </label>

                    <label class="control" *ngIf="compagne?.requestStatus.value =='Rejected'">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle text-danger" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                      </svg>
                      <div class="text-danger">{{compagne?.requestStatus.value}}</div>
                    </label>

                    <label class="control" *ngIf="compagne?.requestStatus.value !='Rejected' && compagne?.requestStatus.value !='Validated'">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass" viewBox="0 0 16 16">
                        <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2h-7z"/>
                      </svg>
                      <div class=" ">{{compagne?.requestStatus.value}}</div>
                    </label>

                  </div>
                  <div class="float-end">
                    <div class = "vertical "></div>
                  </div>
               </div>
              </td>
              <td>
                {{compagne?.decisionDescription}}
              </td>
              <td class="pt-4">
                <span
                class="badge text-bg-danger text-white"
                *ngIf="!compagne?.advice"
                >Advice</span
              >
              <span
                class="badge text-bg-secondary text-white"
                *ngIf="compagne?.advice"
                >Request</span
              >
              </td>
              <td class="pt-4">
                {{compagne?.brand.name}}
              </td>
              <td class="pt-4">  {{compagne?.createdDate | date:' MMMM dd EEEEEE yyy'}}</td>
              <td><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-right mt-3 display-1" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
              </svg></td>
            </tr>
          </tbody>
   
        </table>
        <div class="row empty-data" *ngIf="listOfCampagnes.length==0">
          <h4 class="text-center empty-section">
            <p>Aucune données trouvées</p>
          </h4>
        </div>
      </div>
    </div>
  </div>
    

 <!-- editer information -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="getlistMedias()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form  [formGroup]="campaignForm">
          <div class="mb-3 row">
            <label for="inputPassword" class="col-sm-2 col-form-label">Brand<span>*</span></label>
            <div class="col-sm-10">
              <select class="form-control" formControlName="brand" >
                <option *ngFor="let brande of listBrands" [ngValue]="brande.name">
                  {{ brande?.name }}
                </option>
              </select>
            </div>
          </div>
     <div class="mb-3">
     <label for="recipient-name"  class="col-form-label">Campaign name <span>*</span></label>
      <input type="text" formControlName="campaignName" class="form-control" >
    </div>
    <div class="container my-4 ">
    <div class="row">
    <div class="col-sm-6">    
    <p class="form-check-label" for="flexCheckDefault">Media <span>*</span></p>
    <div class="checkbox-items">
      <div *ngFor="let item of listMedias">
        <input type="checkbox" [checked]="item.isChecked" [value]="item.isChecked">{{item.name}}
      </div>
    </div>
    </div>
    <div class="col-md-6 ">
      <div class="checkbox-items pt-4">
        <div *ngFor="let item of listMediasBis">
          <input type="checkbox" [checked]="item.isChecked" [value]="item.isChecked">{{item.name}}
        </div>
      </div>
      </div>
      </div>
      </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-label">Deadline for decision <span>*</span></label>
            <input class="form-control" formControlName="decisionDeadline"  type="date" />
          </div>

        </form>
      </div>
    </div>
  </div>
</div>